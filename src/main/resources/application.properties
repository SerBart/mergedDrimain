# --- JWT ---
# Prefer app.jwt.secret (used by the app) and allow override from env
app.jwt.secret=${APP_JWT_SECRET:REPLACE_WITH_STRONG_SECRET_AT_LEAST_32_CHARS_LONG_1234567890}

# Optional legacy keys (keep for backward compatibility, overridable via env if needed)
jwt.secret=${JWT_SECRET_BASE64:REPLACE_WITH_BASE64_SECRET_256bit_EXAMPLE_dGhpc0lzQVNlY3JldEtleVNlZWQhITIzNDU2Nzg5MA==}
jwt.secret.plain=${JWT_SECRET_PLAIN:super_tajny_klucz_dev_32+_znakow_!!!_123456}
jwt.expiration.minutes=${JWT_EXP_MINUTES:60}

# --- PostgreSQL Configuration (Railway-friendly) ---
# Compose JDBC URL from Railway variables (PGHOST, PGPORT, PGDATABASE) and require SSL in PaaS
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:drimain}?sslmode=require}
spring.datasource.username=${PGUSER:postgres}
spring.datasource.password=${PGPASSWORD:password}

# --- JPA + Hibernate ---
# With Flyway enabled, validate is recommended in prod
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.defer-datasource-initialization=false
#changes
# --- Flyway ---
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.sql.init.mode=never

# --- H2 Console (dev only; harmless if not used) ---
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# --- Attachment Storage Configuration ---
# Use /tmp on Railway by default (writable on ephemeral FS), override via ATTACHMENTS_BASE_PATH if needed
app.attachments.base-path=${ATTACHMENTS_BASE_PATH:/tmp/uploads/attachments}
app.attachments.max-file-size-bytes=${ATTACHMENTS_MAX_SIZE:10485760}

# --- SSE Configuration ---
app.sse.max-clients=${SSE_MAX_CLIENTS:100}
app.sse.heartbeat-interval-seconds=${SSE_HEARTBEAT_SECONDS:30}
app.sse.client-timeout-seconds=${SSE_CLIENT_TIMEOUT_SECONDS:300}

# --- CORS ---
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}
